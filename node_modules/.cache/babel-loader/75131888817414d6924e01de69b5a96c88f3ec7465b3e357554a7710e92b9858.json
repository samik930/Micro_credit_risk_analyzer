{"ast":null,"code":"import _objectSpread from\"C:/Projects/micro-credit-risk-analyzer/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{apiService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionHistory=_ref=>{let{userId,onScoreUpdate}=_ref;const[transactions,setTransactions]=useState([]);const[scoreHistory,setScoreHistory]=useState([]);const[loading,setLoading]=useState(true);const[showAddTransaction,setShowAddTransaction]=useState(false);const[newTransaction,setNewTransaction]=useState({transaction_type:'electricity',amount:'',status:'paid_on_time',provider:'',description:''});useEffect(()=>{fetchData();},[userId]);const fetchData=async()=>{try{setLoading(true);const[transactionsRes,historyRes]=await Promise.all([apiService.getUserTransactions(userId),apiService.getScoreHistory(userId)]);setTransactions(transactionsRes.transactions||[]);setScoreHistory(historyRes.score_history||[]);}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};const handleAddTransaction=async()=>{try{const response=await apiService.addTransaction(userId,_objectSpread(_objectSpread({},newTransaction),{},{amount:parseFloat(newTransaction.amount)}));if(response.success){// Refresh data\nawait fetchData();// Don't update parent score - let it fetch from backend\n// The parent will get the updated score from the transaction-based system\n// Reset form\nsetNewTransaction({transaction_type:'electricity',amount:'',status:'paid_on_time',provider:'',description:''});setShowAddTransaction(false);// Show success message\nalert(\"\\u2705 \".concat(response.message));}}catch(error){console.error('Error adding transaction:',error);alert('Failed to add transaction');}};const handleClearTransactions=async()=>{if(!window.confirm('Are you sure you want to clear all transactions? This action cannot be undone.')){return;}try{const response=await apiService.clearTransactions(userId);if(response.success){// Refresh data to show empty state\nawait fetchData();// Reset credit score to default\nif(onScoreUpdate){onScoreUpdate(50);// Default score when no transactions\n}alert(\"\\u2705 \".concat(response.message));}}catch(error){console.error('Error clearing transactions:',error);alert('Failed to clear transactions');}};const getStatusColor=status=>{switch(status){case'paid_on_time':return'text-green-600 bg-green-100';case'paid_late':return'text-yellow-600 bg-yellow-100';case'failed':return'text-red-600 bg-red-100';default:return'text-gray-600 bg-gray-100';}};const getTypeIcon=type=>{switch(type){case'electricity':return'⚡';case'mobile':return'📱';case'salary':return'💰';case'bnpl':return'🛒';case'paylater':return'💳';default:return'💼';}};const getScoreChangeColor=change=>{if(change>0)return'text-green-600';if(change<0)return'text-red-600';return'text-gray-600';};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-1/4 mb-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:[1,2,3].map(i=>/*#__PURE__*/_jsx(\"div\",{className:\"h-16 bg-gray-200 rounded\"},i))})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:\"Transaction Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClearTransactions,className:\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm\",children:\"Clear All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddTransaction(!showAddTransaction),className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:showAddTransaction?'Cancel':'Add Transaction'})]})]}),showAddTransaction&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Transaction Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTransaction.transaction_type,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{transaction_type:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"electricity\",children:\"\\u26A1 Electricity Bill\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mobile\",children:\"\\uD83D\\uDCF1 Mobile Recharge\"}),/*#__PURE__*/_jsx(\"option\",{value:\"salary\",children:\"\\uD83D\\uDCB0 Salary Credit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bnpl\",children:\"\\uD83D\\uDED2 Buy Now Pay Later\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paylater\",children:\"\\uD83D\\uDCB3 Pay Later Service\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Amount (\\u20B9)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTransaction.amount,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{amount:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"Enter amount\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Payment Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTransaction.status,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{status:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"paid_on_time\",children:\"\\u2705 Paid On Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paid_late\",children:\"\\u26A0\\uFE0F Paid Late\"}),/*#__PURE__*/_jsx(\"option\",{value:\"failed\",children:\"\\u274C Payment Failed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Provider\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTransaction.provider,onChange:e=>setNewTransaction(_objectSpread(_objectSpread({},newTransaction),{},{provider:e.target.value})),className:\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., BSES, Airtel, etc.\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTransaction,disabled:!newTransaction.amount,className:\"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\",children:\"Add Transaction & Update Score\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"Credit Score Changes\"}),scoreHistory.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No score changes yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:scoreHistory.map((change,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:change.change_reason}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:new Date(change.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:change.old_score}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\u2192\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(getScoreChangeColor(change.new_score-change.old_score)),children:change.new_score})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs \".concat(getScoreChangeColor(change.new_score-change.old_score)),children:[change.new_score-change.old_score>0?'+':'',change.new_score-change.old_score,\" pts\"]})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"Recent Transactions\"}),transactions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No transactions found\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:transactions.map((transaction,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:getTypeIcon(transaction.type)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-800\",children:[transaction.provider,\" - \",transaction.description]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[new Date(transaction.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'}),transaction.days_late>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-red-600\",children:[\"(\",transaction.days_late,\" days late)\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-gray-800\",children:[\"\\u20B9\",transaction.amount.toLocaleString('en-IN')]}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 rounded-full text-xs font-medium \".concat(getStatusColor(transaction.status)),children:transaction.status.replace('_',' ').toUpperCase()})]})]},index))})]})]});};export default TransactionHistory;","map":{"version":3,"names":["React","useState","useEffect","apiService","jsx","_jsx","jsxs","_jsxs","TransactionHistory","_ref","userId","onScoreUpdate","transactions","setTransactions","scoreHistory","setScoreHistory","loading","setLoading","showAddTransaction","setShowAddTransaction","newTransaction","setNewTransaction","transaction_type","amount","status","provider","description","fetchData","transactionsRes","historyRes","Promise","all","getUserTransactions","getScoreHistory","score_history","error","console","handleAddTransaction","response","addTransaction","_objectSpread","parseFloat","success","alert","concat","message","handleClearTransactions","window","confirm","clearTransactions","getStatusColor","getTypeIcon","type","getScoreChangeColor","change","className","children","map","i","onClick","value","onChange","e","target","placeholder","disabled","length","index","change_reason","Date","date","toLocaleDateString","day","month","hour","minute","old_score","new_score","transaction","year","days_late","toLocaleString","replace","toUpperCase"],"sources":["C:/Projects/micro-credit-risk-analyzer/src/components/TransactionHistory.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface Transaction {\r\n  type: string;\r\n  amount: number;\r\n  status: string;\r\n  due_date: string;\r\n  paid_date: string;\r\n  days_late: number;\r\n  provider: string;\r\n  description: string;\r\n  date: string;\r\n}\r\n\r\ninterface ScoreHistory {\r\n  old_score: number;\r\n  new_score: number;\r\n  change_reason: string;\r\n  date: string;\r\n}\r\n\r\ninterface TransactionHistoryProps {\r\n  userId: number;\r\n  onScoreUpdate?: (newScore: number) => void;\r\n}\r\n\r\nconst TransactionHistory: React.FC<TransactionHistoryProps> = ({ userId, onScoreUpdate }) => {\r\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n  const [scoreHistory, setScoreHistory] = useState<ScoreHistory[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showAddTransaction, setShowAddTransaction] = useState(false);\r\n  const [newTransaction, setNewTransaction] = useState({\r\n    transaction_type: 'electricity',\r\n    amount: '',\r\n    status: 'paid_on_time',\r\n    provider: '',\r\n    description: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [userId]);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [transactionsRes, historyRes] = await Promise.all([\r\n        apiService.getUserTransactions(userId),\r\n        apiService.getScoreHistory(userId)\r\n      ]);\r\n      \r\n      setTransactions(transactionsRes.transactions || []);\r\n      setScoreHistory(historyRes.score_history || []);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddTransaction = async () => {\r\n    try {\r\n      const response = await apiService.addTransaction(userId, {\r\n        ...newTransaction,\r\n        amount: parseFloat(newTransaction.amount)\r\n      });\r\n\r\n      if (response.success) {\r\n        // Refresh data\r\n        await fetchData();\r\n        \r\n        // Don't update parent score - let it fetch from backend\r\n        // The parent will get the updated score from the transaction-based system\r\n\r\n        // Reset form\r\n        setNewTransaction({\r\n          transaction_type: 'electricity',\r\n          amount: '',\r\n          status: 'paid_on_time',\r\n          provider: '',\r\n          description: ''\r\n        });\r\n        setShowAddTransaction(false);\r\n\r\n        // Show success message\r\n        alert(`✅ ${response.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding transaction:', error);\r\n      alert('Failed to add transaction');\r\n    }\r\n  };\r\n\r\n  const handleClearTransactions = async () => {\r\n    if (!window.confirm('Are you sure you want to clear all transactions? This action cannot be undone.')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await apiService.clearTransactions(userId);\r\n      \r\n      if (response.success) {\r\n        // Refresh data to show empty state\r\n        await fetchData();\r\n        \r\n        // Reset credit score to default\r\n        if (onScoreUpdate) {\r\n          onScoreUpdate(50); // Default score when no transactions\r\n        }\r\n\r\n        alert(`✅ ${response.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error clearing transactions:', error);\r\n      alert('Failed to clear transactions');\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'paid_on_time': return 'text-green-600 bg-green-100';\r\n      case 'paid_late': return 'text-yellow-600 bg-yellow-100';\r\n      case 'failed': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getTypeIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'electricity': return '⚡';\r\n      case 'mobile': return '📱';\r\n      case 'salary': return '💰';\r\n      case 'bnpl': return '🛒';\r\n      case 'paylater': return '💳';\r\n      default: return '💼';\r\n    }\r\n  };\r\n\r\n  const getScoreChangeColor = (change: number) => {\r\n    if (change > 0) return 'text-green-600';\r\n    if (change < 0) return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-4 bg-gray-200 rounded w-1/4 mb-4\"></div>\r\n          <div className=\"space-y-3\">\r\n            {[1, 2, 3].map(i => (\r\n              <div key={i} className=\"h-16 bg-gray-200 rounded\"></div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Add Transaction Button */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800\">Transaction Management</h3>\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={handleClearTransactions}\r\n              className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm\"\r\n            >\r\n              Clear All\r\n            </button>\r\n            <button\r\n              onClick={() => setShowAddTransaction(!showAddTransaction)}\r\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              {showAddTransaction ? 'Cancel' : 'Add Transaction'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {showAddTransaction && (\r\n          <div className=\"bg-gray-50 p-4 rounded-lg space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Transaction Type\r\n                </label>\r\n                <select\r\n                  value={newTransaction.transaction_type}\r\n                  onChange={(e) => setNewTransaction({...newTransaction, transaction_type: e.target.value})}\r\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"electricity\">⚡ Electricity Bill</option>\r\n                  <option value=\"mobile\">📱 Mobile Recharge</option>\r\n                  <option value=\"salary\">💰 Salary Credit</option>\r\n                  <option value=\"bnpl\">🛒 Buy Now Pay Later</option>\r\n                  <option value=\"paylater\">💳 Pay Later Service</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Amount (₹)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={newTransaction.amount}\r\n                  onChange={(e) => setNewTransaction({...newTransaction, amount: e.target.value})}\r\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"Enter amount\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Payment Status\r\n                </label>\r\n                <select\r\n                  value={newTransaction.status}\r\n                  onChange={(e) => setNewTransaction({...newTransaction, status: e.target.value})}\r\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"paid_on_time\">✅ Paid On Time</option>\r\n                  <option value=\"paid_late\">⚠️ Paid Late</option>\r\n                  <option value=\"failed\">❌ Payment Failed</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Provider\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newTransaction.provider}\r\n                  onChange={(e) => setNewTransaction({...newTransaction, provider: e.target.value})}\r\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"e.g., BSES, Airtel, etc.\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleAddTransaction}\r\n              disabled={!newTransaction.amount}\r\n              className=\"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              Add Transaction & Update Score\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Score History */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Credit Score Changes</h3>\r\n        \r\n        {scoreHistory.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center py-4\">No score changes yet</p>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {scoreHistory.map((change, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm text-gray-600\">{change.change_reason}</p>\r\n                  <p className=\"text-xs text-gray-400\">\r\n                    {new Date(change.date).toLocaleDateString('en-IN', {\r\n                      day: 'numeric',\r\n                      month: 'short',\r\n                      hour: '2-digit',\r\n                      minute: '2-digit'\r\n                    })}\r\n                  </p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span className=\"text-sm text-gray-600\">{change.old_score}</span>\r\n                    <span className=\"text-gray-400\">→</span>\r\n                    <span className={`text-sm font-semibold ${getScoreChangeColor(change.new_score - change.old_score)}`}>\r\n                      {change.new_score}\r\n                    </span>\r\n                  </div>\r\n                  <div className={`text-xs ${getScoreChangeColor(change.new_score - change.old_score)}`}>\r\n                    {change.new_score - change.old_score > 0 ? '+' : ''}{change.new_score - change.old_score} pts\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Transaction History */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Recent Transactions</h3>\r\n        \r\n        {transactions.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center py-4\">No transactions found</p>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {transactions.map((transaction, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <span className=\"text-2xl\">{getTypeIcon(transaction.type)}</span>\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-800\">\r\n                      {transaction.provider} - {transaction.description}\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      {new Date(transaction.date).toLocaleDateString('en-IN', {\r\n                        day: 'numeric',\r\n                        month: 'short',\r\n                        year: 'numeric'\r\n                      })}\r\n                      {transaction.days_late > 0 && (\r\n                        <span className=\"ml-2 text-red-600\">\r\n                          ({transaction.days_late} days late)\r\n                        </span>\r\n                      )}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"text-right\">\r\n                  <p className=\"font-semibold text-gray-800\">₹{transaction.amount.toLocaleString('en-IN')}</p>\r\n                  <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(transaction.status)}`}>\r\n                    {transaction.status.replace('_', ' ').toUpperCase()}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}